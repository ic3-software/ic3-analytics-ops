# MDXes

Execute a list of MDX statements and assert their results using a list of previously generated results.

This task is **not using the server MDX result cache**.

The files containing the MDX statements to execute are defined using the `data` field. For example, the following
configuration :

    data: "data/Sales"

is using the files `Sales*` in the `data` folder. This folder is **relative the parent folder** of the `JSON5` file
containing the test definition being run :

    tests/
        data/
            sales.0.mdx.txt
            sales.0.mdx.json(.zip)      : .zip being not mandatory
            sales.1.mdx.txt
            sales.1.mdx.json(.zip)      : .zip being not mandatory
            sales.2.mdx.txt
            sales.2.mdx.json(.zip)      : .zip being not mandatory
    smoke.test.json5

The above folder is containing 3 statements to execute along with their expected results (as generated by the
[`GenerateMDXes`](./GenerateMDXes.md) task).

Note that the MDX statements can contain a delta value used for asserting the floating point values. This is
handy when the results are not exactly the same because of rounding errors :

```
//delta:1e-5

SELECT ... FROM ...
```

Should you want to ignore a statement use the following :

```
//ignore

SELECT ... FROM ...
```

Note this task is using the [TidyExecuteMdxScript](https://doc.iccube.com/?ic3topic=server.api.TidyExecuteMdxScript)
REST API request.

## JSON Definition

```typescript
interface MDXesTask extends Task {

    schema: string;

    // E.g., data/Sales is using the files 'Sales-N.mdx.txt(and .json)' into the 'data' folder.
    data: string;

    // An optional pause applied after the processing of each MDX statement.
    pauses?: Pause;

    // An optional filter : execute this MDX number only.
    filter?: number;

}
```

See also :

- [`JSON5`](../JSON5.md)
- [`Pause`](../Pause.md)
- [`Tasks`](../Tasks.md)
- [`Task`](../Task.md)
- [`GenerateMDXes`](./GenerateMDXes.md)
- [`OpenReport`](./OpenReport.md)

## Example

Execute the statements in the `data` folder and assert their results using the previously generated results.
The execution is **randomly pausing** (500 milliseconds to 1 second) between each statement :

```json5
{
  action: "MDXes",
  data: "data/sales",
  schema: "Sales",
  pauses: "PT:0.5s:PT:1s"
}
```

## Java Source Code

For more details and the most current information, please refer to
the [source code](../../../../src/main/java/ic3/analyticsops/test/task/mdx/AOMDXesTask.java).

_
