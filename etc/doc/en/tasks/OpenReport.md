# OpenReport

Open a report using a local `Chrome` instance.

By default, this task asserts the report can be opened and is ready for printing (the dashboard is opened
simulating a `Print in Browser` action). When defined, an assertion can be used to ensure the user has no
access to the given report (security testing).

Note the execution of the MDX statements as generated by this task are **using the server MDX result cache**.

Note this task can be used as well to extract all the MDX statements sent to the icCube server and their results.
It allows for generating non-regression data for a given dashboard that can be executed using the [MDXes](./MDXes.md)
task or an assertion. You can find some more information in the [example](#example) section later in this document.

## JSON Definition

```typescript
interface OpenReportTask extends Task<OpenReportAssertion> {

    reportPath: string;

    // Default : 30 seconds.
    timeoutS?: number;

    // When present, MDX (and their results) from the report will be extracted and saved there.
    // E.g., data/Sales is using the files 'Sales-N.mdx.txt(and .json)' into the 'data' folder.
    // E.g., data/ is using the files 'ReportName-N.mdx.txt(and .json)' into the 'data' folder.
    data?: string;

}

interface OpenReportAssertion extends Assertion {

    missing?: boolean;

    // Similar to the MDXes task : when present, MDX from the report will be asserted for non-regression.
    // E.g., data/Sales is using the files 'Sales-N.mdx.txt(and .json)' into the 'data' folder.
    // E.g., data/ is using the files 'ReportName-N.mdx.txt(and .json)' into the 'data' folder.
    data?: string;

}
```

See also :

- [`JSON5`](../JSON5.md)
- [`ChromeConfiguration`](../ChromeConfiguration.md)
- [`Tasks`](../Tasks.md)
- [`Task`](../Task.md)
- [`MDXes`](./MDXes.md)

## Example

Open the `ic3-analytics-ops` dashboard :

```json5
{
  action: "OpenReport",
  reportPath: "shared:/ic3-analytics-ops"
}
```

Ensure the user has no access (security testing) to the `ic3-analytics-ops` dashboard :

```json5
{
  action: "OpenReport",
  reportPath: "shared:/ic3-analytics-ops",
  assertions: [
    {
      missing: true
    }
  ]
}
```

Open the `ic3-analytics-ops` dashboard and save into the folder `data` the MDX statements sent to the server
and their results. The `data` field is consistent with the one defined in [MDXes](./MDXes.md). Once you've got
those MDX statements, you can use the [MDXes](./MDXes.md) to replay them for non-regression or an `OpenReport`
assertion (see next example) :

```json5
{
  action: "OpenReport",
  reportPath: "shared:/ic3-analytics-ops",
  data: "data/"
}
```

The `data` folder will contain for example :

```
    data/
        ic3-analytics-ops.0.mdx.txt
        ic3-analytics-ops.0.mdx.json.zip
        ic3-analytics-ops.1.mdx.txt
        ic3-analytics-ops.1.mdx.json.zip
        ic3-analytics-ops.2.mdx.txt
        ic3-analytics-ops.2.mdx.json.zip
```

Open the `ic3-analytics-ops` dashboard and assert the MDX sent from the dashboard using the expected results
from the `data` directory (see previous example) :

```json5
{
  action: "OpenReport",
  reportPath: "shared:/ic3-analytics-ops",
  assertions: [
    {
      data: "data/"
    }
  ],
}
```

## Java Source Code

For more details and the most current information, please refer to
the [source code](../../../../src/main/java/ic3/analyticsops/test/task/reporting/AOOpenReportTask.java).

_
